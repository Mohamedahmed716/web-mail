<div class="page-container">

  <div class="toolbar">
    <div class="left-tools">
      <h2 class="page-title">Sent</h2>

      <div class="search-wrapper">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input type="text" class="search-input" placeholder="Search sent mails...">
      </div>
    </div>

    <div class="right-tools">
      <button class="icon-btn" title="Filter"><i class="fa-solid fa-filter"></i></button>
      <button class="icon-btn" title="Refresh" (click)="loadSentMails()"><i class="fa-solid fa-rotate-right"></i></button>
    </div>
  </div>

  <div class="action-bar">
    <div class="checkbox-wrapper">
      <input type="checkbox" id="selectAllSent">
      <label for="selectAllSent">Select All</label>
    </div>
    <div class="actions">
      <button class="text-btn"><i class="fa-solid fa-folder-open"></i> Move</button>
      <button class="text-btn danger"><i class="fa-regular fa-trash-can"></i> Delete</button>
    </div>
  </div>

  <div class="email-list">

    <div class="email-item" *ngFor="let email of sentEmails" (click)="openEmail(email)">

      <div class="item-checkbox" (click)="stopProp($event)">
        <input type="checkbox">
      </div>

      <div class="item-content">

        <div class="sender-info">
          <span class="sender-name">To: {{ getReceiversList(email.receivers) }}</span>
          <span class="sub-text">{{ email.sender }}</span>
        </div>

        <div class="main-info">
          <div class="item-subject">
            {{ email.subject }}
            <i *ngIf="(email.attachments?.length || 0) > 0 || (email.attachmentNames?.length || 0) > 0"
               class="fa-solid fa-paperclip clip-icon"
               style="font-size: 0.8rem; color: #6b7280;">
            </i>
          </div>
          <div class="item-body">{{ email.body }}</div>
        </div>

        <div class="meta-info">
          <span class="item-date">{{ email.timestamp | date:'MMM d hh:mm' }}</span>
          <span class="priority-badge" [ngClass]="getPriorityLabel(email.priority).toLowerCase()">
            {{ getPriorityLabel(email.priority) }}
          </span>
        </div>

      </div>
    </div>

    <div *ngIf="!isLoading && sentEmails.length === 0" class="empty-state">
      <i class="fa-regular fa-paper-plane"></i>
      <p>No sent emails found.</p>
    </div>

  </div>

  <div class="pagination-footer">
    <span>1-{{ sentEmails.length }} of {{ sentEmails.length }}</span>
    <div class="right-tools" style="gap: 5px;">
      <button class="icon-btn" disabled><i class="fa-solid fa-chevron-left"></i></button>
      <button class="icon-btn"><i class="fa-solid fa-chevron-right"></i></button>
    </div>
  </div>

</div>
